private["_aa","_ab","_ac","_ad","_ae","_af","_ag","_ah","_ai","_aj"];_aa=_this select 0;if !([_aa,_this select 1]call EPOCH_server_getPToken)exitWith{};_ad=_this select 2;_ad set[2,2400];if !((nearestObjects[_ad,["B_Heli_Transport_01_F"],1000])isEqualTo[])exitWith{diag_log "DEBUG: prevented air drop, too many in area."};_aj=owner _aa;_ab="B_Heli_Transport_01_F";diag_log format["DEBUG: Creating %1 for %3 (Owner ID: %4) at %2",_ab,_ad,name _aa,owner _aa];_ac=createVehicle[_ab,_ad,[],0,"FLY"];_ac call EPOCH_server_setVToken;addToRemainsCollector[_ac];_ac disableTIEquipment true;clearWeaponCargoGlobal _ac;clearItemCargoGlobal _ac;clearMagazineCargoGlobal  _ac;clearBackpackCargoGlobal _ac;_ac allowdamage false;_ac setPosATL _ad;_ac setFuel 1;_ac flyInHeight 120;_ah=createGroup RESISTANCE;_ae=_ad;_af=_ah createUnit["I_helipilot_F",_ae,[],0,"CAN_COLLIDE"];_af assignAsDriver _ac;_af moveInDriver _ac;_ae=_ad findEmptyPosition[1,75,"I_helipilot_F"];_ag=_ah createUnit["I_helicrew_F",_ae,[],0,"CAN_COLLIDE"];_ag assignAsGunner _ac;_ag moveInGunner _ac;_ah setCombatMode "BLUE";(driver _ac)action["engineOn",_ac];_ac setVehicleLock "LOCKEDPLAYER";[_ac,_af,_aa]spawn{axenotSent=false;axenotSent=true;_ac=_this select 0;_af=_this select 1;_aa=_this select 2;while{axenotSent}do{_drvOwner=owner _af;_aj=owner _aa;(group _af)setGroupOwner _aj;if((_drvOwner==_aj))then{[["airDrop",_ac],owner _aa]call EPOCH_sendPublicVariableClient;diag_log format["DEBUG: Transferred ownership of %1 to %2, new owner ID is %3",_af,name _aa,owner _af];axenotSent=false;_ac call EPOCH_localCleanup;};uiSleep 0.5;};};